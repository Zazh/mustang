import{R as Q,H as tt}from"../chunks/CYgJF_JY.js";import{t as k,h as et,e as W,a as y,s as j}from"../chunks/CpxY5Rrp.js";import{i as at}from"../chunks/u4JkCm5p.js";import{R as rt,aa as st,ab as ot,X as $,Y as it,V as nt,T as m,y as S,x as t,_ as T,a0 as dt,W as o,Z as R,a7 as lt,$ as ct,a1 as s}from"../chunks/YHQOgMhm.js";import{i as pt}from"../chunks/0OGjwK8R.js";import{e as O,i as X}from"../chunks/DTnfZw7V.js";import{s as f,a as F}from"../chunks/DIGlqOSf.js";import{p as mt}from"../chunks/DEw31Z6n.js";function vt(g,x){throw new tt(g,x)}function ut(g,x){throw new Q(g,x.toString())}new TextEncoder;const ft=async({fetch:g,params:x,url:z})=>{const p="http://mustang-farbe.kz/api";try{const r=await g(`${p}/products/categories/`);if(!r.ok)throw new Error("Categories fetch failed");const v=await r.json();if(!(v!=null&&v.length))return{products:[],categories:[],categoryCounts:{}};const _=x.categoryId,E=v.find(u=>u.id.toString()===_);if(!E)throw ut(307,`/products/${v[0].id}`);const w=await g(`${p}/products/products/?category__name=${encodeURIComponent(E.name)}`);if(!w.ok){const u=await w.text();throw new Error(`Products fetch failed: ${u}`)}return{products:await w.json(),categories:v,activeCategory:_,categoryCounts:v.reduce((u,b)=>(u[b.id]=b.count,u),{})}}catch(r){throw console.error("Loader error:",r),r instanceof Error&&r.message.includes("Redirect")?r:vt(500,"Ошибка загрузки данных")}},St=Object.freeze(Object.defineProperty({__proto__:null,load:ft},Symbol.toStringTag,{value:"Module"}));let Y="Широкий ассортимент качественных лакокрасочных материалов от компании Mustang Farbe: краски, покрытия, лаки и грунтовки.";var gt=k('<meta name="description"> <meta name="keywords" content="воднодисперсионные краски, декоративные покрытия, грунтовки, лаки, эмали, Mustang Farbe"> <link rel="canonical" href="https://mustang-farbe.kz/products/"> <meta property="og:title"> <meta property="og:description"> <meta property="og:image" content="https://mustang-farbe.kz/logo.ico">',1),xt=k("<a><strong> </strong> <span> </span></a>"),_t=k("<li><button> </button></li>"),ht=k('<div class="z-10 fixed bottom-16 left-0 right-0 bg-white divide-y divide-gray-100 rounded-t-lg shadow-lg max-h-[80vh] overflow-y-auto"><ul class="py-2 text-sm text-gray-700"></ul></div>'),wt=k('<div class="w-full max-w-sm bg-white border border-gray-200"><a><img class="p-8 w-full aspect-square"></a> <div class="px-5 pb-5"><a><h5 class="text-xl font-normal tracking-wide text-black uppercase"> </h5></a></div></div>'),bt=k('<div class="col-span-full text-center py-8"><p class="text-gray-500">Нет товаров в этой категории</p></div>'),yt=k('<section class="container mx-auto max-w-[1292px] px-4"><div class="mt-[3.5rem]"><h1 class="md:text-7xl uppercase text-center font-display text-5xl">Продукция</h1></div> <div class="my-[2.5rem] justify-center flex-wrap gap-3 hidden md:flex"></div> <div class="mt-[1.5rem] mb-[1rem] md:hidden"><button class="fixed bottom-0 start-0 end-0 bg-gray-100 border-t border-gray-300 h-16 px-5 flex items-center justify-between w-full" type="button"><span class="flex flex-col items-start justify-center"><span class="text-sm font-medium tracking-wide text-blue-600">Категория</span> <span class="text-md font-medium tracking-wide"> </span></span> <span class="flex items-center justify-center"><svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 4 4 4-4"></path></svg></span></button> <!></div> <div class="flex flex-row justify-between items-center pb-[1.5rem]"><div><h1 class="text-2xl md:text-3xl tracking-wide"> </h1></div></div> <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 justify-center"></div></section>');function Tt(g,x){rt(x,!1);const z=T(),p=T(),r=T();let v=mt(x,"data",8),_=T(!1);const E=a=>{R(_,!1),window.location.href=`/products/${a}`};st(()=>(t(z),t(p),t(r),lt(v())),()=>{(a=>(R(z,a.products),R(p,a.categories),R(r,a.activeCategory)))(v())}),ot(),at();var w=yt();et(a=>{var e=gt(),n=nt(e);f(n,"content",Y);var c=m(n,6),l=m(c,2);f(l,"content",Y),ct(2),$((d,i)=>{dt.title=`${d??""} | каталог Mustang Farbe`,f(c,"content",i)},[()=>{var d;return(d=t(p).find(i=>i.id==t(r)))==null?void 0:d.name},()=>{var d;return(d=t(p).find(i=>i.id==t(r)))==null?void 0:d.name}],S),y(a,e)});var M=m(o(w),2);O(M,5,()=>t(p),X,(a,e)=>{var n=xt();let c;var l=o(n),d=o(l,!0);s(l);var i=m(l,2);let h;var C=o(i,!0);s(i),s(n),$((H,N)=>{f(n,"href",`/products/${t(e).id??""}`),c=F(n,1,"[ cat-nav ] inline-flex cursor-pointer tracking-wide items-center px-3 py-2.5 text-sm font-medium text-center rounded-sm transition svelte-1x6dfn4",null,c,H),j(d,t(e).name),h=F(i,1,"ms-2 text-xs svelte-1x6dfn4",null,h,N),j(C,t(e).count)},[()=>({"bg-blue-800":t(r)==t(e).id,"text-white":t(r)==t(e).id,"bg-gray-400":t(r)!=t(e).id,"text-black":t(r)!=t(e).id,"hover:bg-blue-800":t(r)!=t(e).id,"hover:text-white":t(r)!=t(e).id}),()=>({"text-white":t(r)==t(e).id,"text-blue-800":t(r)!=t(e).id})],S),y(a,n)}),s(M);var u=m(M,2),b=o(u),I=o(b),P=m(o(I),2),Z=o(P,!0);s(P),s(I);var U=m(I,2),A=o(U);let B;s(U),s(b);var G=m(b,2);{var J=a=>{var e=ht(),n=o(e);O(n,5,()=>t(p),X,(c,l)=>{var d=_t(),i=o(d);let h;var C=o(i);s(i),s(d),$(H=>{h=F(i,1,"block w-full text-left px-4 py-3 hover:bg-gray-100 uppercase tracking-wider font-[500]",null,h,H),j(C,`${t(l).name??""} (${t(l).count??""})`)},[()=>({"bg-gray-200":t(r)==t(l).id})],S),W("click",i,()=>E(t(l).id)),y(c,d)}),s(n),s(e),y(a,e)};pt(G,a=>{t(_)&&a(J)})}s(u);var q=m(u,2),D=o(q),L=o(D),K=o(L,!0);s(L),s(D),s(q);var V=m(q,2);O(V,5,()=>t(z),a=>a.id,(a,e)=>{var n=wt(),c=o(n),l=o(c);s(c);var d=m(c,2),i=o(d),h=o(i),C=o(h,!0);s(h),s(i),s(d),s(n),$(()=>{f(c,"href",`/products/product/${t(e).id??""}`),f(l,"src",t(e).info.photo),f(l,"alt",t(e).name),f(l,"title",t(e).name),f(i,"href",`/products/product/${t(e).id??""}`),j(C,t(e).name)}),y(a,n)},a=>{var e=bt();y(a,e)}),s(V),s(w),$((a,e,n)=>{j(Z,a),B=F(A,0,"w-2.5 h-2.5 ms-3 transform transition-transform",null,B,e),j(K,n)},[()=>{var a;return((a=t(p).find(e=>e.id==t(r)))==null?void 0:a.name)||"Выберите категорию"},()=>({"rotate-180":t(_)}),()=>{var a;return(a=t(p).find(e=>e.id==t(r)))==null?void 0:a.name}],S),W("click",b,()=>R(_,!t(_))),y(g,w),it()}export{Tt as component,St as universal};
